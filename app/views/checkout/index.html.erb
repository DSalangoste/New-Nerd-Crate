<div class="container mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6">Checkout</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
      <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
      
      <div class="space-y-4">
        <% @cart_items.each do |item| %>
          <% crate_type = CrateType.find(item["crate_type_id"]) %>
          <div class="flex justify-between items-center">
            <div>
              <p class="font-medium"><%= crate_type.name %></p>
              <p class="text-gray-600">Quantity: <%= item["quantity"] %></p>
            </div>
            <p class="font-medium">
              $<%= number_with_precision(crate_type.price_cents * item["quantity"].to_i / 100.0, precision: 2) %>
            </p>
          </div>
        <% end %>

        <div class="border-t pt-4 mt-4">
          <div class="flex justify-between">
            <p class="font-semibold">Total:</p>
            <p class="font-semibold">
              $<%= number_with_precision(@cart_items.sum { |item| CrateType.find(item["crate_type_id"]).price_cents * item["quantity"].to_i } / 100.0, precision: 2) %>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white shadow-md rounded px-8 pt-6 pb-8">
      <h2 class="text-xl font-semibold mb-4">Complete Order</h2>
      
      <%= form_tag checkout_index_path, method: :post, class: "space-y-4" do %>
        <div class="mb-6">
          <p class="text-gray-600 mb-2">
            By clicking "Place Order", you agree to our terms and conditions.
          </p>
        </div>

        <%= submit_tag "Place Order", class: "w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-200" %>
      <% end %>
    </div>
  </div>
</div> 